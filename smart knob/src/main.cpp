#include <Arduino.h>

#include <Arduino.h>
#include <Adafruit_NeoPixel.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>
#include <Wire.h> //this is for I2C. SPI.h for SPI
//neopixel definitions
#define PIN_NEO_PIXEL 4  // Arduino pin that connects to NeoPixel
#define NUM_PIXELS 24    // The number of LEDs (pixels) on NeoPixel
#define STUDY_PIXELS_PER_MINS 5 // number of mins which acts as one pixel in NeoPixel
#define BREAK_PIXELS_PER_MINS 1
#define MAX_STUDY_TIME 120
#define MIN_STUDY_TIME 5
#define MAX_BREAK_TIME 15
#define MIN_BREAK_TIME 5

Adafruit_NeoPixel NeoPixel(NUM_PIXELS, PIN_NEO_PIXEL, NEO_GRB + NEO_KHZ800);

int study_time = 25; //will be in minutes. Need to take input from user. 
int break_time = 5;
int cycle = 2;

//oled module definitions
#define SCREEN_WIDTH 128
#define SCREEN_HEIGHT 64

Adafruit_SSD1306 oled(SCREEN_WIDTH,SCREEN_HEIGHT,&Wire,-1);

#define FRAME_DELAY (42)
#define FRAME_WIDTH (48)
#define FRAME_HEIGHT (48)
#define FRAME_COUNT (sizeof(frames) / sizeof(frames[0]))
const byte PROGMEM frames[][288] = {
  {0,0,0,0,0,0,0,96,0,0,0,0,0,240,0,0,1,240,1,184,0,0,3,248,3,28,0,0,7,252,6,14,0,0,13,252,12,15,0,0,24,252,24,31,128,0,48,124,48,1,192,0,96,56,96,3,224,0,192,56,112,7,112,1,128,112,56,2,56,3,0,224,28,0,124,6,1,192,14,0,110,12,3,128,7,0,15,24,7,0,3,128,15,176,14,0,1,192,25,224,28,0,0,224,1,192,56,0,0,112,3,128,112,0,0,56,3,0,224,0,0,28,6,1,192,0,0,14,12,3,128,0,0,7,24,7,0,0,0,3,240,14,0,0,0,1,224,28,64,0,0,0,192,56,224,0,0,1,128,112,240,0,0,3,0,225,248,0,0,6,1,193,28,0,0,12,3,128,62,0,0,24,7,0,55,0,0,48,14,0,3,128,0,96,28,64,7,192,0,192,56,224,14,224,1,128,112,112,4,240,3,0,224,56,0,248,6,1,192,28,0,156,12,3,128,14,0,14,12,7,0,7,0,6,30,14,0,3,128,12,31,28,0,1,192,24,31,184,0,0,224,48,31,240,0,0,112,96,63,224,0,0,56,192,63,0,0,0,29,128,48,0,0,0,15,0,0,0,0,0,6,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,96,0,0,0,0,0,240,0,0,1,240,1,184,0,0,3,248,3,28,0,0,7,252,6,14,0,0,13,252,12,15,0,0,24,252,24,31,128,0,48,124,48,1,192,0,96,56,96,3,224,0,192,56,112,7,112,1,128,112,56,2,56,3,0,224,28,0,124,6,1,192,14,0,110,12,3,128,7,0,15,24,7,0,3,128,15,176,14,0,1,192,25,224,28,0,0,224,1,192,56,0,0,112,3,128,112,0,0,56,3,0,224,0,0,28,6,1,192,0,0,14,12,3,128,0,0,7,24,7,0,0,0,3,240,14,0,0,0,1,224,28,64,0,0,0,192,56,224,0,0,1,128,112,240,0,0,3,0,225,248,0,0,6,1,193,28,0,0,12,3,128,62,0,0,24,7,0,55,0,0,48,14,0,3,128,0,96,28,64,7,192,0,192,56,224,14,224,1,128,112,112,4,240,3,0,224,56,0,248,6,1,192,28,0,156,12,3,128,14,0,14,12,7,0,7,0,6,30,14,0,3,128,12,31,28,0,1,192,24,31,184,0,0,224,48,31,240,0,0,112,96,63,224,0,0,56,192,63,0,0,0,29,128,48,0,0,0,15,0,0,0,0,0,6,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,96,0,0,0,0,0,240,0,0,1,240,1,184,0,0,3,248,3,28,0,0,7,252,6,14,0,0,13,252,12,15,0,0,24,252,24,31,128,0,48,124,48,1,192,0,96,56,96,3,224,0,192,56,112,7,112,1,128,112,56,2,56,3,0,224,28,0,124,6,1,192,14,0,110,12,3,128,7,0,15,24,7,0,3,128,15,176,14,0,1,192,25,224,28,0,0,224,1,192,56,0,0,112,3,128,112,0,0,56,3,0,224,0,0,28,6,1,192,0,0,14,12,3,128,0,0,7,24,7,0,0,0,3,240,14,0,0,0,1,224,28,64,0,0,0,192,56,224,0,0,1,128,112,240,0,0,3,0,225,248,0,0,6,1,193,28,0,0,12,3,128,62,0,0,24,7,0,55,0,0,48,14,0,3,128,0,96,28,64,7,192,0,192,56,224,14,224,1,128,112,112,4,240,3,0,224,56,0,248,6,1,192,28,0,156,12,3,128,14,0,14,12,7,0,7,0,6,30,14,0,3,128,12,31,28,0,1,192,24,31,184,0,0,224,48,31,240,0,0,112,96,63,224,0,0,56,192,63,0,0,0,29,128,48,0,0,0,15,0,0,0,0,0,6,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,96,0,0,0,0,0,240,0,0,1,240,1,184,0,0,3,248,3,28,0,0,7,252,6,14,0,0,13,252,12,15,0,0,24,252,24,31,128,0,48,124,48,1,192,0,96,56,96,3,224,0,192,56,112,7,112,1,128,112,56,2,56,3,0,224,28,0,124,6,1,192,14,0,110,12,3,128,7,0,15,24,7,0,3,128,15,176,14,0,1,192,25,224,28,0,0,224,1,192,56,0,0,112,3,128,112,0,0,56,3,0,224,0,0,28,6,1,192,0,0,14,12,3,128,0,0,7,24,7,0,0,0,3,240,14,0,0,0,1,224,28,64,0,0,0,192,56,224,0,0,1,128,112,240,0,0,3,0,225,248,0,0,6,1,193,28,0,0,12,3,128,62,0,0,24,7,0,55,0,0,48,14,0,3,128,0,96,28,64,7,192,0,192,56,224,14,224,1,128,112,112,4,240,3,0,224,56,0,248,6,1,192,28,0,156,12,3,128,14,0,14,12,7,0,7,0,6,30,14,0,3,128,12,31,28,0,1,192,24,31,184,0,0,224,48,31,240,0,0,112,96,63,224,0,0,56,192,63,0,0,0,29,128,48,0,0,0,15,0,0,0,0,0,6,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,240,0,0,0,0,7,248,0,0,0,0,15,252,0,0,0,0,29,252,0,0,0,0,56,252,3,128,0,0,112,124,3,192,0,0,192,56,6,240,0,1,128,56,12,56,0,3,0,112,28,60,0,14,0,192,24,47,0,28,3,128,48,7,128,56,7,0,112,13,192,112,14,0,96,12,240,224,28,0,112,1,249,192,56,0,28,0,31,0,112,0,14,0,30,0,224,0,7,128,60,1,192,0,1,192,56,3,0,0,0,224,112,14,0,0,0,56,224,28,0,0,0,29,192,56,0,0,0,15,128,113,0,0,0,7,0,231,192,0,0,14,1,196,224,0,0,56,3,128,240,0,0,112,6,1,156,0,0,224,12,1,30,0,1,192,56,0,63,0,3,128,113,128,3,192,7,0,225,192,7,224,6,1,192,112,6,120,7,3,128,56,0,124,15,135,0,30,0,78,15,206,0,7,0,7,15,248,0,3,128,6,31,240,0,0,224,12,31,192,0,0,112,24,24,0,0,0,56,56,0,0,0,0,14,48,0,0,0,0,7,96,0,0,0,0,3,224,0,0,0,0,0,192,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,224,0,0,0,0,3,240,0,0,0,0,7,248,0,0,0,0,31,248,0,0,0,0,57,252,0,0,0,0,112,252,0,0,0,0,224,120,0,0,0,3,192,56,0,0,0,7,0,112,0,0,0,14,0,224,0,0,0,28,1,192,0,0,0,56,7,0,7,0,0,224,14,0,7,192,1,192,28,0,12,240,3,128,56,0,8,252,7,0,224,0,24,223,28,1,192,0,48,31,248,3,128,0,48,25,240,7,0,0,96,3,224,28,0,0,112,3,192,56,0,0,60,7,0,112,0,0,15,14,0,224,0,0,3,220,1,192,0,0,0,248,7,14,0,0,0,224,14,15,128,0,1,192,28,13,224,0,3,128,56,1,248,0,3,128,224,1,158,0,3,193,192,0,31,128,7,227,143,0,3,224,7,247,3,192,3,120,7,252,0,240,6,126,15,248,0,60,0,38,15,128,0,15,0,6,0,0,0,3,192,12,0,0,0,0,240,12,0,0,0,0,60,24,0,0,0,0,15,24,0,0,0,0,3,176,0,0,0,0,0,240,0,0,0,0,0,96,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,192,0,0,0,0,15,224,0,0,0,0,31,240,0,0,0,0,63,240,0,0,0,0,51,240,0,0,0,0,97,240,0,0,0,0,192,240,0,0,0,1,128,224,0,0,0,3,128,192,0,0,0,7,1,128,0,0,0,6,3,128,0,0,0,12,7,0,0,0,0,24,14,0,0,0,0,56,12,0,0,0,0,112,24,0,0,0,0,96,56,0,0,0,0,192,112,0,0,0,1,128,224,0,0,0,3,0,192,0,0,0,7,1,128,0,0,0,6,3,0,0,0,0,12,7,0,0,0,15,24,14,0,0,0,15,240,12,0,0,0,9,240,24,0,0,0,25,224,48,0,0,0,24,192,112,0,0,0,17,128,231,0,0,0,51,1,199,224,0,0,63,1,132,252,0,0,62,3,0,223,128,0,7,7,0,201,240,0,7,206,0,1,190,0,15,252,0,1,63,192,15,248,240,0,19,248,15,240,62,0,6,126,15,192,7,192,2,100,14,0,0,248,0,12,0,0,0,31,0,12,0,0,0,3,224,8,0,0,0,0,124,24,0,0,0,0,15,152,0,0,0,0,1,240,0,0,0,0,0,48,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,31,0,0,0,0,0,63,128,0,0,0,0,127,192,0,0,0,0,127,192,0,0,0,0,207,192,0,0,0,0,195,192,0,0,0,1,129,192,0,0,0,1,129,128,0,0,0,3,1,128,0,0,0,3,3,0,0,0,0,6,3,0,0,0,0,6,6,0,0,0,0,12,6,0,0,0,0,12,12,0,0,0,0,24,12,0,0,0,0,24,24,0,0,0,0,48,24,0,0,0,0,48,48,0,0,0,0,96,48,0,0,0,0,96,96,0,0,0,0,192,96,0,0,0,0,192,192,0,0,0,1,128,192,0,0,0,1,129,128,0,0,0,3,3,128,0,0,0,3,3,0,0,0,0,6,7,0,0,0,0,6,6,0,0,0,0,12,14,0,0,0,0,60,12,0,0,0,0,56,28,0,0,0,0,60,25,128,0,0,0,63,59,255,0,0,0,127,244,255,252,0,0,127,224,204,255,240,0,127,192,204,153,255,192,127,128,1,153,159,255,126,0,0,1,153,63,127,240,0,0,3,50,1,255,192,0,1,6,0,7,255,0,0,6,0,0,31,254,0,6,0,0,0,127,248,6,0,0,0,0,255,230,0,0,0,0,3,252,0,0,0,0,0,12},
  {0,0,0,0,0,0,0,62,0,0,0,0,0,127,0,0,0,0,0,255,128,0,0,0,0,255,128,0,0,0,0,255,128,0,0,0,0,207,128,0,0,0,1,129,128,0,0,0,1,129,128,0,0,0,1,131,0,0,0,0,1,3,0,0,0,0,3,3,0,0,0,0,3,3,0,0,0,0,3,6,0,0,0,0,6,6,0,0,0,0,6,6,0,0,0,0,6,6,0,0,0,0,6,12,0,0,0,0,12,12,0,0,0,0,12,12,0,0,0,0,12,24,0,0,0,0,12,24,0,0,0,0,24,24,0,0,0,0,24,24,0,0,0,0,24,48,0,0,0,0,48,48,0,0,0,0,48,48,0,0,0,0,48,48,0,0,0,0,48,96,0,0,0,0,96,96,0,0,0,0,96,96,0,0,0,0,112,96,0,0,0,0,126,192,0,0,0,0,127,192,0,0,0,0,63,128,0,0,0,0,63,0,0,0,0,0,62,0,0,0,0,0,28,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,219,153,153,153,153,155,217,153,153,153,153,155,193,129,129,129,129,131,192,0,0,0,0,3,192,0,0,0,0,3,192,0,0,0,0,3,255,255,255,255,255,255,255,255,255,255,255,255},
  {0,0,0,0,0,0,0,1,240,0,0,0,0,3,248,0,0,0,0,7,252,0,0,0,0,7,252,0,0,0,0,7,252,0,0,0,0,12,124,0,0,0,0,12,8,0,0,0,0,12,24,0,0,0,0,24,24,0,0,0,0,24,24,0,0,0,0,24,24,0,0,0,0,24,48,0,0,0,0,48,48,0,0,0,0,48,48,0,0,0,0,48,48,0,0,0,0,48,96,0,0,0,0,96,96,0,0,0,0,96,96,0,0,0,0,96,96,0,0,0,0,96,192,0,0,0,0,192,192,0,0,0,0,192,192,0,0,0,0,192,128,0,0,0,0,193,128,0,0,0,1,129,128,0,0,0,1,129,128,0,0,0,1,131,0,0,0,0,3,3,0,0,0,0,3,3,0,0,0,0,3,3,0,0,0,0,3,134,0,0,0,0,3,246,0,0,0,0,3,254,0,0,0,0,1,252,0,0,0,0,1,248,0,0,0,0,1,240,0,0,0,0,0,224,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,219,153,153,153,153,155,217,153,153,153,153,155,193,129,129,129,129,131,192,0,0,0,0,3,192,0,0,0,0,3,192,0,0,0,0,3,255,255,255,255,255,255,255,255,255,255,255,255},
  {0,0,0,0,0,0,0,0,15,128,0,0,0,0,63,192,0,0,0,0,63,192,0,0,0,0,127,192,0,0,0,0,127,224,0,0,0,0,99,192,0,0,0,0,96,192,0,0,0,0,192,192,0,0,0,0,192,192,0,0,0,0,193,128,0,0,0,0,193,128,0,0,0,1,129,128,0,0,0,1,129,128,0,0,0,1,129,0,0,0,0,1,131,0,0,0,0,3,3,0,0,0,0,3,3,0,0,0,0,3,2,0,0,0,0,3,6,0,0,0,0,6,6,0,0,0,0,6,6,0,0,0,0,6,6,0,0,0,0,6,12,0,0,0,0,12,12,0,0,0,0,12,12,0,0,0,0,12,12,0,0,0,0,12,24,0,0,0,0,24,24,0,0,0,0,24,24,0,0,0,0,24,24,0,0,0,0,24,48,0,0,0,0,31,176,0,0,0,0,31,240,0,0,0,0,15,224,0,0,0,0,15,192,0,0,0,0,15,128,0,0,0,0,15,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,219,153,153,153,153,155,217,153,153,153,153,155,193,129,129,129,129,131,192,0,0,0,0,3,192,0,0,0,0,3,192,0,0,0,0,3,255,255,255,255,255,255,255,255,255,255,255,255},
  {0,0,0,0,0,0,0,0,0,248,0,0,0,0,1,252,0,0,0,0,3,254,0,0,0,0,3,254,0,0,0,0,3,254,0,0,0,0,6,30,0,0,0,0,6,6,0,0,0,0,6,6,0,0,0,0,6,12,0,0,0,0,6,12,0,0,0,0,12,12,0,0,0,0,12,12,0,0,0,0,12,24,0,0,0,0,12,24,0,0,0,0,24,24,0,0,0,0,24,24,0,0,0,0,24,24,0,0,0,0,24,48,0,0,0,0,48,48,0,0,0,0,48,48,0,0,0,0,48,48,0,0,0,0,48,96,0,0,0,0,96,96,0,0,0,0,96,96,0,0,0,0,96,96,0,0,0,0,96,192,0,0,0,0,96,192,0,0,0,0,192,192,0,0,0,0,192,192,0,0,0,0,192,128,0,0,0,0,193,128,0,0,0,0,253,128,0,0,0,0,255,128,0,0,0,0,127,0,0,0,0,0,126,0,0,0,0,0,124,0,0,0,0,0,120,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,219,153,153,153,153,155,217,153,153,153,153,155,193,129,129,129,129,131,192,0,0,0,0,3,192,0,0,0,0,3,192,0,0,0,0,3,255,255,255,255,255,255,255,255,255,255,255,255},
  {0,0,0,0,0,0,0,0,0,15,192,0,0,0,0,31,224,0,0,0,0,31,224,0,0,0,0,31,240,0,0,0,0,63,240,0,0,0,0,48,240,0,0,0,0,48,32,0,0,0,0,48,96,0,0,0,0,96,96,0,0,0,0,96,96,0,0,0,0,96,96,0,0,0,0,96,192,0,0,0,0,96,192,0,0,0,0,192,192,0,0,0,0,192,192,0,0,0,0,192,192,0,0,0,0,193,128,0,0,0,1,129,128,0,0,0,1,129,128,0,0,0,1,129,128,0,0,0,1,131,0,0,0,0,1,131,0,0,0,0,3,3,0,0,0,0,3,3,0,0,0,0,3,2,0,0,0,0,3,6,0,0,0,0,6,6,0,0,0,0,6,6,0,0,0,0,6,6,0,0,0,0,6,12,0,0,0,0,6,12,0,0,0,0,7,236,0,0,0,0,7,252,0,0,0,0,7,248,0,0,0,0,3,240,0,0,0,0,3,224,0,0,0,0,3,192,0,0,255,255,255,255,255,255,255,255,255,255,255,255,219,153,153,153,153,155,217,153,153,153,153,155,193,129,129,129,129,131,192,0,0,0,0,3,192,0,0,0,0,3,192,0,0,0,0,3,255,255,255,255,255,255,255,255,255,255,255,255},
  {0,0,0,0,0,0,0,0,0,0,126,0,0,0,0,0,255,0,0,0,0,0,255,0,0,0,0,1,255,0,0,0,0,1,255,0,0,0,0,1,143,0,0,0,0,1,131,0,0,0,0,3,3,0,0,0,0,3,3,0,0,0,0,3,3,0,0,0,0,3,6,0,0,0,0,2,6,0,0,0,0,6,6,0,0,0,0,6,6,0,0,0,0,6,4,0,0,0,0,6,12,0,0,0,0,12,12,0,0,0,0,12,12,0,0,0,0,12,12,0,0,0,0,12,24,0,0,0,0,12,24,0,0,0,0,24,24,0,0,0,0,24,24,0,0,0,0,24,24,0,0,0,0,24,48,0,0,0,0,16,48,0,0,0,0,48,48,0,0,0,0,48,48,0,0,0,0,48,32,0,0,0,0,48,96,0,0,0,0,48,96,0,0,0,0,63,96,0,0,0,0,63,224,0,0,0,0,63,192,0,0,0,0,31,128,0,0,0,0,31,0,0,0,0,0,30,0,0,255,255,255,255,255,255,255,255,255,255,255,255,219,153,153,153,153,155,217,153,153,153,153,155,193,129,129,129,129,131,192,0,0,0,0,3,192,0,0,0,0,3,192,0,0,0,0,3,255,255,255,255,255,255,255,255,255,255,255,255},
  {0,0,0,0,0,0,0,0,0,0,3,224,0,0,0,0,7,240,0,0,0,0,15,248,0,0,0,0,15,248,0,0,0,0,15,248,0,0,0,0,24,248,0,0,0,0,24,24,0,0,0,0,24,24,0,0,0,0,24,48,0,0,0,0,24,48,0,0,0,0,48,48,0,0,0,0,48,48,0,0,0,0,48,48,0,0,0,0,48,96,0,0,0,0,48,96,0,0,0,0,96,96,0,0,0,0,96,96,0,0,0,0,96,96,0,0,0,0,96,192,0,0,0,0,96,192,0,0,0,0,192,192,0,0,0,0,192,192,0,0,0,0,192,192,0,0,0,0,193,128,0,0,0,0,193,128,0,0,0,1,129,128,0,0,0,1,129,128,0,0,0,1,129,128,0,0,0,1,131,0,0,0,0,1,131,0,0,0,0,3,131,0,0,0,0,1,251,0,0,0,0,1,254,0,0,0,0,1,254,0,0,0,0,0,252,0,0,0,0,0,248,0,0,0,0,0,240,0,255,255,255,255,255,255,255,255,255,255,255,255,219,153,153,153,153,155,217,153,153,153,153,155,193,129,129,129,129,131,192,0,0,0,0,3,192,0,0,0,0,3,192,0,0,0,0,3,255,255,255,255,255,255,255,255,255,255,255,255},
  {0,0,0,0,0,0,0,0,0,0,31,0,0,0,0,0,63,128,0,0,0,0,127,192,0,0,0,0,127,192,0,0,0,0,127,192,0,0,0,0,103,192,0,0,0,0,192,192,0,0,0,0,192,192,0,0,0,0,192,192,0,0,0,0,193,128,0,0,0,0,193,128,0,0,0,1,129,128,0,0,0,1,129,128,0,0,0,1,129,128,0,0,0,1,131,0,0,0,0,1,131,0,0,0,0,3,3,0,0,0,0,3,3,0,0,0,0,3,3,0,0,0,0,3,6,0,0,0,0,3,6,0,0,0,0,2,6,0,0,0,0,6,6,0,0,0,0,6,6,0,0,0,0,6,4,0,0,0,0,6,12,0,0,0,0,4,12,0,0,0,0,12,12,0,0,0,0,12,12,0,0,0,0,12,8,0,0,0,0,12,24,0,0,0,0,15,216,0,0,0,0,15,248,0,0,0,0,7,240,0,0,0,0,7,224,0,0,0,0,7,192,0,0,0,0,3,128,0,255,255,255,255,255,255,255,255,255,255,255,255,219,153,153,153,153,155,217,153,153,153,153,155,193,129,129,129,129,131,192,0,0,0,0,3,192,0,0,0,0,3,192,0,0,0,0,3,255,255,255,255,255,255,255,255,255,255,255,255},
  {0,0,0,0,32,0,0,0,0,1,248,0,0,0,0,3,252,0,0,0,0,3,252,0,0,0,0,7,254,0,0,0,0,7,254,0,0,0,0,6,28,0,0,0,0,6,12,0,0,0,0,6,12,0,0,0,0,12,12,0,0,0,0,12,12,0,0,0,0,12,12,0,0,0,0,12,24,0,0,0,0,12,24,0,0,0,0,8,24,0,0,0,0,24,24,0,0,0,0,24,24,0,0,0,0,24,24,0,0,0,0,24,48,0,0,0,0,24,48,0,0,0,0,48,48,0,0,0,0,48,48,0,0,0,0,48,48,0,0,0,0,48,96,0,0,0,0,48,96,0,0,0,0,48,96,0,0,0,0,96,96,0,0,0,0,96,96,0,0,0,0,96,96,0,0,0,0,96,192,0,0,0,0,96,192,0,0,0,0,224,192,0,0,0,0,127,192,0,0,0,0,127,192,0,0,0,0,127,128,0,0,0,0,63,0,0,0,0,0,62,0,0,0,0,0,60,0,0,255,255,255,255,255,255,255,255,255,255,255,255,219,153,153,153,153,155,217,153,153,153,153,155,193,129,129,129,129,131,192,0,0,0,0,3,192,0,0,0,0,3,192,0,0,0,0,3,255,255,255,255,255,255,255,255,255,255,255,255},
  {0,0,0,0,0,0,0,0,0,31,128,0,0,0,0,31,192,0,0,0,0,63,224,0,0,0,0,63,224,0,0,0,0,63,224,0,0,0,0,96,224,0,0,0,0,96,96,0,0,0,0,96,96,0,0,0,0,96,192,0,0,0,0,96,192,0,0,0,0,96,192,0,0,0,0,192,192,0,0,0,0,192,192,0,0,0,0,192,192,0,0,0,0,193,128,0,0,0,0,193,128,0,0,0,0,129,128,0,0,0,1,129,128,0,0,0,1,129,128,0,0,0,1,129,128,0,0,0,1,131,0,0,0,0,1,131,0,0,0,0,3,3,0,0,0,0,3,3,0,0,0,0,3,3,0,0,0,0,3,3,0,0,0,0,3,6,0,0,0,0,3,6,0,0,0,0,6,6,0,0,0,0,6,6,0,0,0,0,6,6,0,0,0,0,7,252,0,0,0,0,3,252,0,0,0,0,3,252,0,0,0,0,3,248,0,0,0,0,1,240,0,0,0,0,1,224,0,0,255,255,255,255,255,255,255,255,255,255,255,255,219,153,153,153,153,155,217,153,153,153,153,155,193,129,129,129,129,131,192,0,0,0,0,3,192,0,0,0,0,3,192,0,0,0,0,3,255,255,255,255,255,255,255,255,255,255,255,255},
  {0,0,0,0,0,0,0,0,0,252,0,0,0,0,1,254,0,0,0,0,3,254,0,0,0,0,3,254,0,0,0,0,3,254,0,0,0,0,3,14,0,0,0,0,3,6,0,0,0,0,2,6,0,0,0,0,6,6,0,0,0,0,6,6,0,0,0,0,6,6,0,0,0,0,6,12,0,0,0,0,6,12,0,0,0,0,4,12,0,0,0,0,12,12,0,0,0,0,12,12,0,0,0,0,12,12,0,0,0,0,12,24,0,0,0,0,12,24,0,0,0,0,12,24,0,0,0,0,24,24,0,0,0,0,24,24,0,0,0,0,24,24,0,0,0,0,24,16,0,0,0,0,24,48,0,0,0,0,24,48,0,0,0,0,48,48,0,0,0,0,48,48,0,0,0,0,48,48,0,0,0,0,48,32,0,0,0,0,48,96,0,0,0,0,63,96,0,0,0,0,63,224,0,0,0,0,31,192,0,0,0,0,31,128,0,0,0,0,31,128,0,0,0,0,15,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,219,153,153,153,153,155,217,153,153,153,153,155,193,129,129,129,129,131,192,0,0,0,0,3,192,0,0,0,0,3,192,0,0,0,0,3,255,255,255,255,255,255,255,255,255,255,255,255},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,192,0,0,0,0,15,224,0,0,0,0,31,240,0,0,0,0,31,240,0,0,0,0,51,240,0,0,0,0,48,240,0,0,0,0,96,112,0,0,0,0,96,96,0,0,0,0,192,224,0,0,0,1,192,192,0,0,0,1,129,128,0,0,0,3,129,128,0,0,0,3,3,0,0,0,0,6,3,0,0,0,0,6,6,0,0,0,0,12,6,0,0,0,0,12,12,0,0,0,0,24,12,0,0,0,0,24,24,0,0,0,0,48,24,0,0,0,0,48,48,0,0,0,0,96,112,0,0,0,0,96,96,0,0,0,0,192,224,0,0,0,0,192,192,0,0,0,1,129,192,0,0,0,1,129,128,0,0,0,3,131,0,0,0,0,3,227,0,0,0,0,1,254,0,0,0,0,1,254,0,0,0,0,1,252,0,0,0,0,1,240,0,0,0,0,1,224,0,0,0,0,1,128,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,219,153,153,153,153,155,217,153,153,153,153,155,193,129,129,129,129,131,192,0,0,0,0,3,192,0,0,0,0,3,192,0,0,0,0,3,255,255,255,255,255,255,255,255,255,255,255,255},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62,0,0,0,0,0,255,0,0,0,0,1,255,128,0,0,0,3,191,128,0,0,0,7,31,128,0,0,0,14,15,128,0,0,0,28,7,0,0,0,0,56,6,0,0,0,0,112,12,0,0,0,0,192,24,0,0,0,1,128,112,0,0,0,3,0,224,0,0,0,6,1,192,0,0,0,12,3,128,0,0,0,24,7,0,0,0,0,112,14,0,0,0,0,224,28,0,0,0,1,192,56,0,0,0,3,128,112,0,0,0,7,0,224,0,0,0,6,1,192,0,0,0,14,3,128,0,0,0,15,7,0,0,0,0,15,142,0,0,0,0,31,220,0,0,0,0,31,240,0,0,0,0,31,224,0,0,0,0,31,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,219,153,153,153,153,155,217,153,153,153,153,155,193,129,129,129,129,131,192,0,0,0,0,3,192,0,0,0,0,3,192,0,0,0,0,3,255,255,255,255,255,255,255,255,255,255,255,255},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,224,0,0,0,0,31,240,0,0,0,0,127,248,0,0,0,1,225,248,0,0,0,15,129,248,0,0,0,62,0,248,0,0,0,248,0,240,0,0,3,224,0,224,0,0,15,0,3,192,0,0,124,0,31,0,0,1,240,0,124,0,0,7,192,1,240,0,0,15,0,7,128,0,0,12,0,30,0,0,0,30,0,248,0,0,0,62,3,224,0,0,0,127,15,128,0,0,0,127,60,0,0,0,0,255,240,0,0,0,0,127,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,219,153,153,153,153,155,217,153,153,153,153,155,193,129,129,129,129,131,192,0,0,0,0,3,192,0,0,0,0,3,192,0,0,0,0,3,255,255,255,255,255,255,255,255,255,255,255,255},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,192,0,0,0,0,3,240,0,0,0,0,15,248,0,0,0,0,61,248,0,0,0,0,241,252,0,0,0,1,224,252,0,0,0,7,128,120,0,0,0,30,0,120,0,0,0,120,0,112,0,0,0,240,1,192,0,0,3,192,7,128,0,0,15,0,30,0,0,0,60,0,56,0,0,0,112,0,240,0,0,1,224,3,192,0,0,7,128,15,0,0,0,30,0,28,0,0,0,56,0,120,0,0,0,112,1,224,0,0,0,112,7,128,0,0,48,240,14,0,0,0,63,248,56,0,0,0,55,248,240,0,0,0,55,255,192,0,0,0,35,255,15,0,0,0,97,252,15,248,0,0,96,0,76,255,192,0,96,0,196,207,254,0,112,0,0,153,159,240,127,128,0,1,153,255,15,252,0,1,129,63,0,127,224,0,3,51,0,3,255,0,0,6,0,0,31,248,0,6,0,0,0,255,192,6,0,0,0,7,254,6,0,0,0,0,31,246,0,0,0,0,0,252,0,0,0,0,0,4},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,224,0,0,0,0,3,248,0,0,0,0,15,248,0,0,0,0,29,252,0,0,0,0,120,252,0,0,0,0,224,124,0,0,0,1,192,124,0,0,0,7,0,56,0,0,0,14,0,112,0,0,0,60,1,192,0,0,0,112,3,128,0,0,1,224,15,0,0,0,3,128,28,0,0,0,15,0,120,0,7,0,28,0,224,0,7,192,120,1,192,0,12,240,240,7,0,0,12,255,192,14,0,0,8,31,128,60,0,0,24,30,0,112,0,0,24,60,1,224,0,0,48,112,3,128,0,0,60,224,7,0,0,0,15,128,28,56,0,0,3,128,56,95,0,0,3,192,224,207,192,0,3,225,192,9,248,0,7,247,128,1,190,0,7,254,16,3,55,128,15,252,60,0,19,240,15,128,15,128,6,124,0,0,1,224,2,78,0,0,0,124,0,12,0,0,0,15,0,12,0,0,0,3,224,24,0,0,0,0,120,24,0,0,0,0,30,16,0,0,0,0,7,240,0,0,0,0,0,240,0,0,0,0,0,32,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,224,0,0,0,0,1,248,0,0,0,0,7,248,0,0,0,0,15,252,0,0,0,0,28,252,0,0,0,0,56,252,0,0,0,0,112,124,3,0,0,1,192,56,3,192,0,3,128,48,6,224,0,7,0,224,12,120,0,14,1,192,12,124,0,28,3,128,24,47,0,112,7,0,48,15,128,224,14,0,48,12,225,192,56,0,96,8,243,128,112,0,56,0,159,0,224,0,28,0,28,1,192,0,7,0,56,3,128,0,3,128,112,7,0,0,0,224,224,28,0,0,0,113,192,56,0,0,0,31,0,112,0,0,0,14,0,227,0,0,0,28,1,207,192,0,0,56,7,0,224,0,0,112,14,1,248,0,1,192,28,1,156,0,3,128,56,0,31,0,7,0,115,0,19,128,6,1,195,192,3,224,7,3,128,224,6,112,15,135,0,120,0,124,15,206,0,28,0,78,15,252,0,15,0,6,31,248,0,3,128,14,31,192,0,1,224,12,24,0,0,0,112,24,0,0,0,0,60,56,0,0,0,0,14,48,0,0,0,0,7,224,0,0,0,0,1,224,0,0,0,0,0,192,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,96,0,0,0,0,0,240,0,0,1,240,1,184,0,0,3,248,3,28,0,0,7,252,6,14,0,0,13,252,12,15,0,0,24,252,24,31,128,0,48,124,48,1,192,0,96,56,96,3,224,0,192,56,112,7,112,1,128,112,56,2,56,3,0,224,28,0,124,6,1,192,14,0,110,12,3,128,7,0,15,24,7,0,3,128,15,176,14,0,1,192,25,224,28,0,0,224,1,192,56,0,0,112,3,128,112,0,0,56,3,0,224,0,0,28,6,1,192,0,0,14,12,3,128,0,0,7,24,7,0,0,0,3,240,14,0,0,0,1,224,28,64,0,0,0,192,56,224,0,0,1,128,112,240,0,0,3,0,225,248,0,0,6,1,193,28,0,0,12,3,128,62,0,0,24,7,0,55,0,0,48,14,0,3,128,0,96,28,64,7,192,0,192,56,224,14,224,1,128,112,112,4,240,3,0,224,56,0,248,6,1,192,28,0,156,12,3,128,14,0,14,12,7,0,7,0,6,30,14,0,3,128,12,31,28,0,1,192,24,31,184,0,0,224,48,31,240,0,0,112,96,63,224,0,0,56,192,63,0,0,0,29,128,48,0,0,0,15,0,0,0,0,0,6,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,96,0,0,0,0,0,240,0,0,1,240,1,184,0,0,3,248,3,28,0,0,7,252,6,14,0,0,13,252,12,15,0,0,24,252,24,31,128,0,48,124,48,1,192,0,96,56,96,3,224,0,192,56,112,7,112,1,128,112,56,2,56,3,0,224,28,0,124,6,1,192,14,0,110,12,3,128,7,0,15,24,7,0,3,128,15,176,14,0,1,192,25,224,28,0,0,224,1,192,56,0,0,112,3,128,112,0,0,56,3,0,224,0,0,28,6,1,192,0,0,14,12,3,128,0,0,7,24,7,0,0,0,3,240,14,0,0,0,1,224,28,64,0,0,0,192,56,224,0,0,1,128,112,240,0,0,3,0,225,248,0,0,6,1,193,28,0,0,12,3,128,62,0,0,24,7,0,55,0,0,48,14,0,3,128,0,96,28,64,7,192,0,192,56,224,14,224,1,128,112,112,4,240,3,0,224,56,0,248,6,1,192,28,0,156,12,3,128,14,0,14,12,7,0,7,0,6,30,14,0,3,128,12,31,28,0,1,192,24,31,184,0,0,224,48,31,240,0,0,112,96,63,224,0,0,56,192,63,0,0,0,29,128,48,0,0,0,15,0,0,0,0,0,6,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,96,0,0,0,0,0,240,0,0,1,240,1,184,0,0,3,248,3,28,0,0,7,252,6,14,0,0,13,252,12,15,0,0,24,252,24,31,128,0,48,124,48,1,192,0,96,56,96,3,224,0,192,56,112,7,112,1,128,112,56,2,56,3,0,224,28,0,124,6,1,192,14,0,110,12,3,128,7,0,15,24,7,0,3,128,15,176,14,0,1,192,25,224,28,0,0,224,1,192,56,0,0,112,3,128,112,0,0,56,3,0,224,0,0,28,6,1,192,0,0,14,12,3,128,0,0,7,24,7,0,0,0,3,240,14,0,0,0,1,224,28,64,0,0,0,192,56,224,0,0,1,128,112,240,0,0,3,0,225,248,0,0,6,1,193,28,0,0,12,3,128,62,0,0,24,7,0,55,0,0,48,14,0,3,128,0,96,28,64,7,192,0,192,56,224,14,224,1,128,112,112,4,240,3,0,224,56,0,248,6,1,192,28,0,156,12,3,128,14,0,14,12,7,0,7,0,6,30,14,0,3,128,12,31,28,0,1,192,24,31,184,0,0,224,48,31,240,0,0,112,96,63,224,0,0,56,192,63,0,0,0,29,128,48,0,0,0,15,0,0,0,0,0,6,0,0,0,0,0,0,0}
};

void study_timer(){
    
    int temp_study_time = study_time;
    while(temp_study_time>0){
      NeoPixel.clear();
      int pixels_to_show= floor(temp_study_time/STUDY_PIXELS_PER_MINS);
      pixels_to_show%=NUM_PIXELS+1;
      for (int pixel =0; pixel<pixels_to_show; pixel++){
        NeoPixel.setPixelColor(pixel, NeoPixel.Color(225, 25, 25));}
      NeoPixel.show();
      delay(1000*STUDY_PIXELS_PER_MINS);
      temp_study_time=temp_study_time-STUDY_PIXELS_PER_MINS;}

}

void break_timer(){
    
    int temp_break_time = break_time;
    while (temp_break_time>0){
      NeoPixel.clear();
      int pixels_to_show= floor(temp_break_time/BREAK_PIXELS_PER_MINS);
      pixels_to_show%=NUM_PIXELS+1;
      for (int pixel =0; pixel<pixels_to_show ;pixel++){
        NeoPixel.setPixelColor(pixel, NeoPixel.Color(40, 199, 162));}
      NeoPixel.show();
      delay(1000*BREAK_PIXELS_PER_MINS);
      temp_break_time=temp_break_time-BREAK_PIXELS_PER_MINS;}
    
}

void idle_screen(){
  oled.clearDisplay();
  oled.setTextColor(WHITE);
  oled.setTextSize(2);
  oled.setCursor(20,10);
  oled.print("POMODORO");
  oled.setTextSize(1);
  oled.setCursor(50,30);
  oled.print("TIMER");
}

void study_countdown_screen(){
  int temp_study_countdown=study_time;
  while(temp_study_countdown>0){
    oled.clearDisplay();
    oled.setTextColor(WHITE);
    oled.setCursor(0,0);
    oled.print("Time left: ");
    oled.print(study_time);
    delay(1000*STUDY_PIXELS_PER_MINS);
    temp_study_countdown=temp_study_countdown-STUDY_PIXELS_PER_MINS;}
}
void study_screen(){
  int frame = 0;
  while (true){
  oled.clearDisplay();
  oled.drawBitmap(40, 8, frames[frame], FRAME_WIDTH, FRAME_HEIGHT, 1);
  oled.display();
  frame = (frame + 1) % FRAME_COUNT;
  delay(FRAME_DELAY);
  }
}

void break_countdown_screen(){
  int temp_break_countdown=break_time;
  while(temp_break_countdown>0){
    oled.clearDisplay();
    oled.setTextColor(WHITE);
    oled.setCursor(0,0);
    oled.print("Time left: ");
    oled.print(break_time);
    delay(1000*BREAK_PIXELS_PER_MINS);
    temp_break_countdown=temp_break_countdown-BREAK_PIXELS_PER_MINS;}
}

void setup() {
  Serial.begin(9600);
  study_time%=MAX_STUDY_TIME+1; 
  break_time%=MAX_BREAK_TIME+1;

  if(study_time<MIN_STUDY_TIME){
    study_time=MIN_STUDY_TIME;
    if (cycle==0){
      study_time=0;
    }
    else{
      break_time=MIN_BREAK_TIME;
    }
  }
  
  NeoPixel.begin();  // INITIALIZE NeoPixel strip object (REQUIRED)
  Wire.begin();
  oled.begin(SSD1306_SWITCHCAPVCC, 0x3c);
}

void loop() {
  // put your main code here, to run repeatedly:
  //idle_screen();
  //oled.display();
  study_screen();
  if(cycle>0){
    
    if (cycle==1){
      study_timer();
      cycle--;
    }
    else{
      study_timer();
      break_timer();
      cycle--;
    }
  }
  else{
    NeoPixel.clear();
    NeoPixel.show();
  }

}